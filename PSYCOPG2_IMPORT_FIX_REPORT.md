# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∏–º–ø–æ—Ä—Ç–∞ psycopg2.extras

## –ü—Ä–æ–±–ª–µ–º–∞
Pylance –≤—ã–¥–∞–≤–∞–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: `Import "psycopg2.extras" could not be resolved from source` –≤ —Ñ–∞–π–ª–µ `models.py` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 11.

## –ü—Ä–∏—á–∏–Ω–∞
–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏ –≤ stub —Ñ–∞–π–ª–∞—Ö:
- `stubs/psycopg2/__init__.pyi` –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª `connection` –∏ `cursor` –∏–∑ `extensions`
- `stubs/psycopg2/extras.pyi` —Ç–∞–∫–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª `connection` –∏ `cursor` –∏–∑ `extensions`
- –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ —Ç–∏–ø–æ–≤ –≤–æ –≤—Ä–µ–º—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

## –†–µ—à–µ–Ω–∏–µ
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã stub —Ñ–∞–π–ª—ã –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤:

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `stubs/psycopg2/__init__.pyi`
```python
# –ë—ã–ª–æ:
from psycopg2.extensions import connection, cursor

# –°—Ç–∞–ª–æ:
from typing import Any, Optional, Union, Type, TYPE_CHECKING

if TYPE_CHECKING:
    from .extensions import connection, cursor
else:
    connection = Any
    cursor = Any
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `stubs/psycopg2/extras.pyi`
```python
# –ë—ã–ª–æ:
from .extensions import cursor, connection

# –°—Ç–∞–ª–æ:
from typing import Any, Optional, Dict, List, Union, TYPE_CHECKING

if TYPE_CHECKING:
    from .extensions import cursor, connection
else:
    cursor = Any
    connection = Any
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –ò–º–ø–æ—Ä—Ç `from psycopg2.extras import RealDictCursor` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ –∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `psycopg2.extras` –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ Pylance –±–æ–ª—å—à–µ –Ω–µ –≤—ã–¥–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± –∏–º–ø–æ—Ä—Ç–µ
- ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test_psycopg2_fix.py`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∏–º–ø–æ—Ä—Ç–æ–≤:
```bash
python test_psycopg2_fix.py
# –†–µ–∑—É–ª—å—Ç–∞—Ç: üéâ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã psycopg2 —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!
```

## –§–∞–π–ª—ã, –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- `stubs/psycopg2/__init__.pyi` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã
- `stubs/psycopg2/extras.pyi` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã
- `test_psycopg2_fix.py` - —Å–æ–∑–¥–∞–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ Runtime –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ IDE
- ‚úÖ –ù–µ—Ç –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É Pylance –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
